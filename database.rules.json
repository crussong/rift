{
  "rules": {
    "rooms": {
      "$roomCode": {
        // Lesen: Jeder kann Räume lesen
        ".read": true,
        
        // Schreiben: Komplex - neue Räume können erstellt werden,
        // bestehende nur von Mitgliedern geändert werden
        ".write": "!data.exists() || data.child('players').hasChild(auth.uid)",
        
        "players": {
          "$playerId": {
            // Spieler können ihre eigenen Daten ändern
            ".write": "$playerId === auth.uid || data.parent().parent().child('host').val() === auth.uid"
          }
        },
        
        // lastActivity kann von jedem Spieler im Raum aktualisiert werden
        "lastActivity": {
          ".write": "data.parent().child('players').hasChild(auth.uid)"
        },
        
        // Status kann nur vom Host geändert werden
        "status": {
          ".write": "data.parent().child('host').val() === auth.uid"
        }
      }
    },
    
    "admin": {
      // Admin-Bereich nur für Cloud Functions
      ".read": false,
      ".write": false
    }
  }
}
