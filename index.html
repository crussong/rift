<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RIFT</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: #000;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }
  .bg {
    width: 100vw;
    height: 100vh;
    object-fit: contain;
    object-position: center;
  }
  .dev-trigger {
    position: fixed;
    top: 12px;
    right: 12px;
    width: 32px;
    height: 32px;
    border: none;
    background: transparent;
    cursor: default;
    opacity: 0;
    z-index: 100;
  }
  .dev-trigger:hover { opacity: 0.15; cursor: pointer; }
  .overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    z-index: 200;
    align-items: center;
    justify-content: center;
  }
  .overlay.open { display: flex; }
  .login-box {
    background: #111;
    border: 1px solid #2a2a2a;
    border-radius: 8px;
    padding: 24px;
    width: 280px;
  }
  .login-box input {
    width: 100%;
    padding: 10px 12px;
    background: #1a1a1a;
    border: 1px solid #333;
    border-radius: 4px;
    color: #ccc;
    font-size: 13px;
    font-family: monospace;
    outline: none;
  }
  .login-box input:focus { border-color: #555; }
  .login-box button {
    width: 100%;
    margin-top: 10px;
    padding: 8px;
    background: #222;
    border: 1px solid #333;
    border-radius: 4px;
    color: #888;
    font-size: 12px;
    cursor: pointer;
  }
  .login-box button:hover { background: #2a2a2a; color: #aaa; }
  .login-box .err {
    color: #c0392b;
    font-size: 11px;
    margin-top: 8px;
    display: none;
  }
</style>
</head>
<body>

<img class="bg" src="https://res.cloudinary.com/dza4jgreq/image/upload/v1770755658/t1cwjnfxyu6s8tnuay7v.png" alt="RIFT">

<button class="dev-trigger" id="devBtn" aria-label="Dev"></button>

<div class="overlay" id="overlay">
  <div class="login-box">
    <input type="password" id="pw" placeholder="Zugang" autofocus>
    <button id="loginBtn">OK</button>
    <div class="err" id="err">Nein.</div>
  </div>
</div>

<script>
(function(){
  // Check bypass
  if(localStorage.getItem('_r')==='\x72\x69\x66\x74'){
    window.location.href='/hub.html';
    return;
  }

  const overlay=document.getElementById('overlay');
  const pw=document.getElementById('pw');
  const err=document.getElementById('err');

  document.getElementById('devBtn').addEventListener('click',()=>{
    overlay.classList.add('open');
    setTimeout(()=>pw.focus(),100);
  });

  overlay.addEventListener('click',e=>{
    if(e.target===overlay){overlay.classList.remove('open');err.style.display='none'}
  });

  async function check(){
    const v=pw.value;
    if(!v)return;
    const hash=await sha256(v);
    if(hash===await sha256Target()){
      localStorage.setItem('_r','\x72\x69\x66\x74');
      window.location.href='/hub.html';
    } else {
      err.style.display='block';
      pw.value='';
    }
  }

  document.getElementById('loginBtn').addEventListener('click',check);
  pw.addEventListener('keydown',e=>{if(e.key==='Enter')check()});

  async function sha256(str){
    const buf=new TextEncoder().encode(str);
    const hash=await crypto.subtle.digest('SHA-256',buf);
    return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,'0')).join('');
  }

  // Target hash built at runtime from parts to avoid grep
  function sha256Target(){
    const p=[
      String.fromCharCode(106,90,55,43,48,43,55),
      String.fromCharCode(66,89,122,55,66,69,58),
      String.fromCharCode(71,57,105,97,122,83,97),
      String.fromCharCode(72,86,101,95,104,54,58),
      String.fromCharCode(101,82)
    ];
    return sha256(p.join(''));
  }
})();
</script>
</body>
</html>
